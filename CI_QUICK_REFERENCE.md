# CI ì›Œí¬í”Œë¡œìš° ë¹ ë¥¸ ì°¸ì¡° ê°€ì´ë“œ

## ğŸ¯ CI ì›Œí¬í”Œë¡œìš° ê°œìš”

GitHub Actions CIëŠ” ë‹¤ìŒ 5ê°œ jobìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CI ì›Œí¬í”Œë¡œìš°                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚ Quality â”‚  â”‚ Security â”‚  (ë³‘ë ¬ ì‹¤í–‰)                 â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚       â”‚                                                  â”‚
â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚       â”‚       â”‚         â”‚          â”‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”  â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Perf  â”‚  â”‚    â”‚ Coverageâ”‚  â”‚ Build â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”˜              â”‚
â”‚              â”‚                      â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                        â”‚                                â”‚
â”‚                   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
â”‚                   â”‚  Notify  â”‚                         â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ ê° Job ì„¤ëª…

### 1ï¸âƒ£ Quality Job

**ëª©ì **: ì½”ë“œ í’ˆì§ˆ ê²€ì¦
**ì‹¤í–‰ ì‹œê°„**: ~3-5ë¶„

- âœ… Prettier í¬ë§· ê²€ì‚¬
- âš ï¸ Svelte íƒ€ì… ì²´í¬ (ê²½ê³  í—ˆìš©)
- âš ï¸ TypeScript íƒ€ì… ì²´í¬ (ê²½ê³  í—ˆìš©)
- âš ï¸ ESLint (Svelte) (ê²½ê³  í—ˆìš©)
- âš ï¸ ESLint (TypeScript) (ê²½ê³  í—ˆìš©)
- âš ï¸ í…ŒìŠ¤íŠ¸ + ì»¤ë²„ë¦¬ì§€ (ê²½ê³  í—ˆìš©)

**ì‹¤íŒ¨ ì¡°ê±´**: Prettier ê²€ì‚¬ë§Œ ì‹¤íŒ¨ ì‹œ ì „ì²´ ì‹¤íŒ¨

### 2ï¸âƒ£ Security Job

**ëª©ì **: ë³´ì•ˆ ì·¨ì•½ì  ê²€ì‚¬
**ì‹¤í–‰ ì‹œê°„**: ~1-2ë¶„

- âš ï¸ npm audit (critical ìˆ˜ì¤€, ê²½ê³  í—ˆìš©)

**ì‹¤íŒ¨ ì¡°ê±´**: ì—†ìŒ (í•­ìƒ í†µê³¼)

### 3ï¸âƒ£ Perf Job

**ëª©ì **: ì„±ëŠ¥ ì¸¡ì • (Lighthouse)
**ì‹¤í–‰ ì‹œê°„**: ~5-7ë¶„
**ì˜ì¡´ì„±**: Quality Job ì™„ë£Œ í•„ìš”

1. í”„ë¡œë•ì…˜ ë¹Œë“œ ìƒì„±
2. ë¯¸ë¦¬ë³´ê¸° ì„œë²„ ì‹œì‘ (í¬íŠ¸ 4173)
3. ì„œë²„ ì¤€ë¹„ ëŒ€ê¸° (30ì´ˆ íƒ€ì„ì•„ì›ƒ)
4. Lighthouse CI ì‹¤í–‰
5. ì„œë²„ ì¢…ë£Œ

**ì‹¤íŒ¨ ì¡°ê±´**: ë¹Œë“œ ì‹¤íŒ¨ ì‹œë§Œ ì‹¤íŒ¨, LighthouseëŠ” ì‹¤íŒ¨í•´ë„ ê³„ì†

### 4ï¸âƒ£ Build Job

**ëª©ì **: ë°°í¬ ì¤€ë¹„
**ì‹¤í–‰ ì‹œê°„**: ~2-3ë¶„
**ì˜ì¡´ì„±**: Quality, Security, Perf ëª¨ë‘ ì™„ë£Œ í•„ìš”

- í”„ë¡œë•ì…˜ ë¹Œë“œ ìƒì„±
- ë¹Œë“œ ì•„í‹°íŒ©íŠ¸ ì—…ë¡œë“œ (.svelte-kit, build)

**ì‹¤íŒ¨ ì¡°ê±´**: ë¹Œë“œ ì‹¤íŒ¨ ì‹œ

### 5ï¸âƒ£ Coverage Job

**ëª©ì **: ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ë³´ê³ 
**ì‹¤í–‰ ì‹œê°„**: ~1ë¶„
**ì˜ì¡´ì„±**: Quality Job ì™„ë£Œ í•„ìš”

- Quality Jobì—ì„œ ìƒì„±ëœ ì»¤ë²„ë¦¬ì§€ ë‹¤ìš´ë¡œë“œ
- ì»¤ë²„ë¦¬ì§€ ë°ì´í„° í™•ì¸

**ì‹¤íŒ¨ ì¡°ê±´**: ì—†ìŒ (í•­ìƒ í†µê³¼)

### 6ï¸âƒ£ Notify Job

**ëª©ì **: Slack ì•Œë¦¼
**ì‹¤í–‰ ì‹œê°„**: ~10ì´ˆ
**ì˜ì¡´ì„±**: ëª¨ë“  Job ì™„ë£Œ (ì„±ê³µ/ì‹¤íŒ¨ ë¬´ê´€)

- Slackìœ¼ë¡œ CI ê²°ê³¼ ì „ì†¡
- í•„ìš” ì‹œí¬ë¦¿: `SLACK_WEBHOOK_URL`

---

## ğŸ”§ ë¡œì»¬ í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´

### ì „ì²´ CI ì‹œë®¬ë ˆì´ì…˜

```bash
./scripts/test-ci-locally.sh
```

### ê°œë³„ ë‹¨ê³„ í…ŒìŠ¤íŠ¸

#### Quality ë‹¨ê³„

```bash
# Format ê²€ì‚¬ (í•„ìˆ˜ í†µê³¼)
pnpm format:check

# Svelte ê²€ì‚¬ (ê²½ê³  í—ˆìš©)
pnpm run check:svelte

# TypeScript ê²€ì‚¬ (ê²½ê³  í—ˆìš©)
pnpm run check:typescript

# Lint ê²€ì‚¬ (ê²½ê³  í—ˆìš©)
pnpm run lint:svelte
pnpm run lint:typescript

# í…ŒìŠ¤íŠ¸ (ê²½ê³  í—ˆìš©)
pnpm test:coverage
```

#### Security ë‹¨ê³„

```bash
pnpm security:audit
```

#### Build ë‹¨ê³„

```bash
pnpm build
```

#### Perf ë‹¨ê³„ (ìˆ˜ë™)

```bash
# 1. ë¹Œë“œ
pnpm build

# 2. ë¯¸ë¦¬ë³´ê¸° ì„œë²„ ì‹œì‘
pnpm preview --port 4173 &
echo $! > preview.pid

# 3. Lighthouse ì‹¤í–‰
pnpm dlx @lhci/cli autorun --collect.url=http://localhost:4173 --upload.target=filesystem

# 4. ì„œë²„ ì¢…ë£Œ
kill $(cat preview.pid)
rm preview.pid
```

---

## ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### CI ì‹¤íŒ¨ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸

1. **Format Check ì‹¤íŒ¨**

   ```bash
   pnpm format
   git add .
   git commit -m "chore: format code"
   ```

2. **Svelte/TypeScript ì²´í¬ ì‹¤íŒ¨** (ê²½ê³ ëŠ” ê´œì°®ìŒ)
   - ì—ëŸ¬ ë¡œê·¸ í™•ì¸
   - í•´ë‹¹ íŒŒì¼ ìˆ˜ì •
   - ë¡œì»¬ì—ì„œ ì¬ê²€ì¦

3. **Build ì‹¤íŒ¨**

   ```bash
   pnpm install
   pnpm build
   # ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸ í›„ ìˆ˜ì •
   ```

4. **Perf Job ì‹¤íŒ¨**
   - ë¹Œë“œê°€ ì„±ê³µí•˜ëŠ”ì§€ í™•ì¸
   - í¬íŠ¸ 4173ì´ ì‚¬ìš© ì¤‘ì¸ì§€ í™•ì¸
   - Lighthouse íƒ€ì„ì•„ì›ƒ ì¦ê°€ í•„ìš” ì‹œ CI íŒŒì¼ ìˆ˜ì •

5. **Notify Job ì‹¤íŒ¨**
   - GitHub Secretsì— `SLACK_WEBHOOK_URL` ì„¤ì • í™•ì¸
   - Slack ì›¹í›… URL ìœ íš¨ì„± í™•ì¸

---

## ğŸ“Š CI í†µê³¼ ê¸°ì¤€

### âœ… ì „ì²´ CI í†µê³¼ ì¡°ê±´

1. âœ… Prettier í¬ë§· ê²€ì‚¬ í†µê³¼
2. âœ… í”„ë¡œë•ì…˜ ë¹Œë“œ ì„±ê³µ
3. âš ï¸ ê¸°íƒ€ ê²€ì‚¬ëŠ” ê²½ê³  í—ˆìš©

### âš ï¸ ê²½ê³ ë§Œ ë°œìƒ (í†µê³¼)

- Svelte íƒ€ì… ì—ëŸ¬
- TypeScript íƒ€ì… ì—ëŸ¬
- ESLint ê²½ê³ 
- í…ŒìŠ¤íŠ¸ ì—†ìŒ
- ë³´ì•ˆ ì·¨ì•½ì  (critical ë¯¸ë§Œ)
- Lighthouse ì‹¤íŒ¨

### âŒ CI ì‹¤íŒ¨ ì¡°ê±´

- Prettier í¬ë§· ë¶ˆì¼ì¹˜
- í”„ë¡œë•ì…˜ ë¹Œë“œ ì‹¤íŒ¨

---

## ğŸ” í•„ìš”í•œ GitHub Secrets

Repository â†’ Settings â†’ Secrets and variables â†’ Actions

| Secret ì´ë¦„         | í•„ìˆ˜ ì—¬ë¶€ | ìš©ë„         |
| ------------------- | --------- | ------------ |
| `SLACK_WEBHOOK_URL` | ì„ íƒ      | Slack ì•Œë¦¼   |
| `CODECOV_TOKEN`     | ì„ íƒ      | Codecov í†µí•© |

---

## ğŸ“ˆ CI ìµœì í™” íŒ

1. **ìºì‹± í™œìš©** (ì´ë¯¸ ì„¤ì •ë¨)
   - pnpm ìºì‹œ: `pnpm/action-setup@v4`
   - Node.js ì„¤ì •: `actions/setup-node@v4`

2. **ë³‘ë ¬ ì‹¤í–‰**
   - Qualityì™€ SecurityëŠ” ë³‘ë ¬ ì‹¤í–‰
   - ì´ ì‹¤í–‰ ì‹œê°„ ë‹¨ì¶•

3. **ì¡°ê±´ë¶€ ì‹¤í–‰**
   - Coverage: Quality ì™„ë£Œ í›„
   - Perf: Quality ì™„ë£Œ í›„
   - Build: ëª¨ë“  ê²€ì¦ ì™„ë£Œ í›„
   - Notify: í•­ìƒ ì‹¤í–‰ (`if: always()`)

4. **ì—ëŸ¬ í—ˆìš©**
   - ê°œë°œ ì¤‘ ê²½ê³ ëŠ” í—ˆìš©
   - í”„ë¡œë•ì…˜ ë°°í¬ ì „ ìˆ˜ì •

---

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸: PR ìƒì„± ì „

- [ ] `pnpm format` ì‹¤í–‰
- [ ] `pnpm build` ì„±ê³µ í™•ì¸
- [ ] (ì„ íƒ) `./scripts/test-ci-locally.sh` ì‹¤í–‰
- [ ] ë³€ê²½ì‚¬í•­ ì»¤ë°‹ ë° í‘¸ì‹œ
- [ ] PR ìƒì„± í›„ CI ê²°ê³¼ í™•ì¸

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [CI ê²€ì¦ ë³´ê³ ì„œ](./CI_VALIDATION_REPORT.md)
- [GitHub Actions ë¬¸ì„œ](https://docs.github.com/en/actions)
- [Lighthouse CI ë¬¸ì„œ](https://github.com/GoogleChrome/lighthouse-ci)
